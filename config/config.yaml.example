# Example configuration for gmail-sync-to-vendor-crm
# 
# Fill in values or copy this to config/config.yaml and edit.
#
# Maildir root: set to the Maildir folder you want to ingest.
# This can be your Inbox or your Sent folder (for example:
# "/home/you/Mail/account/Inbox" or "/home/you/Mail/account/Sent")
#
# Alternatively you can supply multiple maildir roots when running the script:
#   python scripts/01_ingest_maildir_to_json.py --maildir-roots /home/you/Mail/account/Inbox /home/you/Mail/account/Sent ...
#
maildir_root: "/home/atingupta2005/Mail/Gmail/Inbox"

# Output directories (relative to project root)
output:
  emails_raw_json: "data/emails_raw_json"
  emails_prefiltered: "data/emails_prefiltered"
  emails_candidates: "data/emails_candidates"
  emails_cleaned: "data/emails_cleaned"
  vendors_raw: "data/vendors_raw"
  vendors_final: "data/vendors_final"
  vendors_persisted: "data/vendors_persisted"

state:
  state_dir: "data/state"

# BERT inference (Step 2B)
bert:
  endpoint: "https://router.huggingface.co/hf-inference/models/facebook/bart-large-mnli"
  auth_token: "${HF_TOKEN}"
  model_version: "zeroshot_mnli_v1"
  timeout_seconds: 60
  max_retries: 3
  threshold: 0.6

  input:
    max_total_chars: 6000
    max_body_chars: 4000
    signature_max_lines: 12
    signature_min_signal_hits: 2


# Prefilter scoring (Step 2A)
prefilter:
  threshold: 4

  subject_weight: 1.0
  body_weight: 0.5

  positive_keywords:

    # Generic business conversation glue
    conversational_business:
      weight: 1
      terms:
        - following up
        - as discussed
        - please confirm
        - confirmed
        - noted
        - acknowledged
        - sharing availability
        - sharing details
        - discussed earlier
        - proceeding further
        - please review
        - please find below
        - please advise

    # Training / course delivery intent
    training_delivery:
      weight: 3
      terms:
        - training
        - trainer
        - workshop
        - course
        - session
        - agenda
        - curriculum
        - syllabus
        - content
        - batch
        - delivery
        - delivered
        - learn
        - schedule
        - calendar
        - availability
        - dates

    # Commercial / financial intent
    commercial:
      weight: 3
      terms:
        - invoice
        - tax invoice
        - billing
        - bill
        - payment
        - paid
        - receipt
        - quote
        - quotation
        - proposal
        - estimate
        - contract
        - agreement
        - price

    # Purchase order / formal engagement
    purchase_order:
      weight: 4
      terms:
        - purchase order
        - po
        - po number
        - work order
        - order

    # Common attachment-driven phrasing
    vague_attachment_phrases:
      weight: 2
      terms:
        - please find attached
        - find attached
        - as discussed
        - attached herewith
        - sharing the document
        - sharing the deck
        - sharing the proposal
        - sharing the invoice

    # SAFETY NET — your core consulting & training skills
    core_skills:
      weight: 1
      terms:
        - generative ai
        - llm
        - rag
        - ai agents
        - machine learning
        - mlops
        - data engineering
        - databricks
        - spark
        - kafka
        - airflow
        - dbt
        - python
        - azure
        - aws
        - gcp
        - kubernetes
        - docker
        - terraform
        - devops
        - devsecops
        - cloud architecture
        - platform engineering
        - blockchain
        - hyperledger
        - ethereum

  # Attachment-based intelligence (very strong signal)
  attachments:
    has_attachment_weight: 2
    filename_keyword_weight: 2
    filename_keywords:
      - invoice
      - po
      - purchase
      - proposal
      - agreement
      - contract
      - agenda
      - deck
      - syllabus
      - content
      - price
      - list
      - pdf
      - doc
      - docx
      - xls
      - xlsx
      - zip

  # Strong negative signals — keep aggressive
  negative_keywords:
    marketing:
      weight: -6
      terms:
        - unsubscribe
        - newsletter
        - promotion
        - limited offer
        - buy now
        - sale
        - discount
        - special offer
        - deal

    security:
      weight: -6
      terms:
        - otp
        - verification code
        - password reset
        - security alert
        - suspicious activity

embedding:
  endpoint: "https://api-inference.huggingface.co/pipeline/feature-extraction/BAAI/bge-base-en-v1.5"
  auth_token: "${HF_TOKEN}"
  model_version: "bge_base_v1"
  timeout_seconds: 30
  max_retries: 3

  vector_db:
    type: "pinecone"
    api_key: "${PINECONE_API_KEY}"
    environment: "${PINECONE_ENVIRONMENT}"
    index_name: "vendor-emails"
    dimension: 768

# LLM (Step 5 & 6)
llm:
  endpoint: "${LLM_ENDPOINT}"
  auth_token: "${LLM_AUTH_TOKEN}"
  model_version: "llm_vendor_extract_v1"
  timeout_seconds: 60
  max_retries: 3
  top_k: 4

# Persistence / Mongo (Step 7 optional)
persistence:
  output_path: "data/vendors_persisted/vendors.json"
mongo:
  enabled: false
  uri: "mongodb://localhost:27017"
  database: "vendor_db"
  collection: "vendors"

# Generic
cli:
  dry_run_default: true
  sample_limit_default: 0


